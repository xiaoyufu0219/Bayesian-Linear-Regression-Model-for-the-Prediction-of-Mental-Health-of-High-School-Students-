# -*- coding: utf-8 -*-
"""step1MCMC.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1OyG4avsDuDMdZ5w_jzdfSzXSW26TdlK7
"""

import pandas as pd
import numpy as np
import pymc as pm
import arviz as az
import math
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.model_selection import train_test_split
from scipy.stats import halfnorm

from google.colab import drive
drive.mount('/content/drive')

file_path = "/content/drive/MyDrive/bayesian/project/upload_na_included.xlsx"

df = pd.read_excel(file_path, usecols=["T1depression", "T1anxiety","Height","Weight","FBG","TC","HDL-C","LDL-C","BMI","WHR","WtHR","Family location","Number of siblings","How much time do you spend with your father in elementary school?","How much time do you spend with your mother in elementary school?","Father’s education level","Mother’s education level","Family financial situation","Sleeping hours","Skipping breakfast"])


# Plot the histogram of the T1depression variable
plt.hist(df['Skipping breakfast'], density=True, bins=30)

# Add a title and labels to the plot
plt.title('PDF of depression Data')
plt.xlabel('Data Values')
plt.ylabel('Probability Density')

# Show the plot
plt.show()


with pm.Model() as model:
    # Define the prior distributions for mu and sigma
    mu = pm.Normal('mu', mu=0, sigma=1000)
    sigma = pm.HalfNormal('sigma', sigma=1000)

    # Define the likelihood function (PDF)
    obs = pm.HalfNormal('obs', sigma=sigma, observed=df['Skipping breakfast'])

    # Run the MCMC sampler
    trace = pm.sample(500, tune=500)

# Plot the posterior distributions of mu and sigma

    pm.plot_posterior(trace, var_names=['mu', 'sigma'])
# Show the plots